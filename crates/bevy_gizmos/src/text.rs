//! This module draws text gizmos using a stroke font.

use bevy_color::Color;
use bevy_math::{Isometry2d, Isometry3d, Vec2, Vec3};
use core::ops::Range;

use crate::{gizmos::GizmoBuffer, prelude::GizmoConfigGroup};

const LINE_HEIGHT: f32 = 1.75;
const SIMPLEX_ASCII_START: usize = 32;
const SIMPLEX_ASCII_END: usize = 126;
const SIMPLEX_CAP_HEIGHT: f32 = 21.0;

const SIMPLEX_POSITIONS: [[i8; 2]; 1100] = [
    [5, 21],
    [5, 7],
    [5, 2],
    [4, 1],
    [5, 0],
    [6, 1],
    [5, 2],
    [4, 21],
    [4, 14],
    [12, 21],
    [12, 14],
    [11, 25],
    [4, -7],
    [17, 25],
    [10, -7],
    [4, 12],
    [18, 12],
    [3, 6],
    [17, 6],
    [8, 25],
    [8, -4],
    [12, 25],
    [12, -4],
    [17, 18],
    [15, 20],
    [12, 21],
    [8, 21],
    [5, 20],
    [3, 18],
    [3, 16],
    [4, 14],
    [5, 13],
    [7, 12],
    [13, 10],
    [15, 9],
    [16, 8],
    [17, 6],
    [17, 3],
    [15, 1],
    [12, 0],
    [8, 0],
    [5, 1],
    [3, 3],
    [21, 21],
    [3, 0],
    [8, 21],
    [10, 19],
    [10, 17],
    [9, 15],
    [7, 14],
    [5, 14],
    [3, 16],
    [3, 18],
    [4, 20],
    [6, 21],
    [8, 21],
    [10, 20],
    [13, 19],
    [16, 19],
    [19, 20],
    [21, 21],
    [17, 7],
    [15, 6],
    [14, 4],
    [14, 2],
    [16, 0],
    [18, 0],
    [20, 1],
    [21, 3],
    [21, 5],
    [19, 7],
    [17, 7],
    [23, 12],
    [23, 13],
    [22, 14],
    [21, 14],
    [20, 13],
    [19, 11],
    [17, 6],
    [15, 3],
    [13, 1],
    [11, 0],
    [7, 0],
    [5, 1],
    [4, 2],
    [3, 4],
    [3, 6],
    [4, 8],
    [5, 9],
    [12, 13],
    [13, 14],
    [14, 16],
    [14, 18],
    [13, 20],
    [11, 21],
    [9, 20],
    [8, 18],
    [8, 16],
    [9, 13],
    [11, 10],
    [16, 3],
    [18, 1],
    [20, 0],
    [22, 0],
    [23, 1],
    [23, 2],
    [5, 19],
    [4, 20],
    [5, 21],
    [6, 20],
    [6, 18],
    [5, 16],
    [4, 15],
    [11, 25],
    [9, 23],
    [7, 20],
    [5, 16],
    [4, 11],
    [4, 7],
    [5, 2],
    [7, -2],
    [9, -5],
    [11, -7],
    [3, 25],
    [5, 23],
    [7, 20],
    [9, 16],
    [10, 11],
    [10, 7],
    [9, 2],
    [7, -2],
    [5, -5],
    [3, -7],
    [8, 21],
    [8, 9],
    [3, 18],
    [13, 12],
    [13, 18],
    [3, 12],
    [13, 18],
    [13, 0],
    [4, 9],
    [22, 9],
    [6, 1],
    [5, 0],
    [4, 1],
    [5, 2],
    [6, 1],
    [6, -1],
    [5, -3],
    [4, -4],
    [4, 9],
    [22, 9],
    [5, 2],
    [4, 1],
    [5, 0],
    [6, 1],
    [5, 2],
    [20, 25],
    [2, -7],
    [9, 21],
    [6, 20],
    [4, 17],
    [3, 12],
    [3, 9],
    [4, 4],
    [6, 1],
    [9, 0],
    [11, 0],
    [14, 1],
    [16, 4],
    [17, 9],
    [17, 12],
    [16, 17],
    [14, 20],
    [11, 21],
    [9, 21],
    [6, 17],
    [8, 18],
    [11, 21],
    [11, 0],
    [4, 16],
    [4, 17],
    [5, 19],
    [6, 20],
    [8, 21],
    [12, 21],
    [14, 20],
    [15, 19],
    [16, 17],
    [16, 15],
    [15, 13],
    [13, 10],
    [3, 0],
    [17, 0],
    [5, 21],
    [16, 21],
    [10, 13],
    [13, 13],
    [15, 12],
    [16, 11],
    [17, 8],
    [17, 6],
    [16, 3],
    [14, 1],
    [11, 0],
    [8, 0],
    [5, 1],
    [4, 2],
    [3, 4],
    [13, 21],
    [3, 7],
    [18, 7],
    [13, 21],
    [13, 0],
    [15, 21],
    [5, 21],
    [4, 12],
    [5, 13],
    [8, 14],
    [11, 14],
    [14, 13],
    [16, 11],
    [17, 8],
    [17, 6],
    [16, 3],
    [14, 1],
    [11, 0],
    [8, 0],
    [5, 1],
    [4, 2],
    [3, 4],
    [16, 18],
    [15, 20],
    [12, 21],
    [10, 21],
    [7, 20],
    [5, 17],
    [4, 12],
    [4, 7],
    [5, 3],
    [7, 1],
    [10, 0],
    [11, 0],
    [14, 1],
    [16, 3],
    [17, 6],
    [17, 7],
    [16, 10],
    [14, 12],
    [11, 13],
    [10, 13],
    [7, 12],
    [5, 10],
    [4, 7],
    [17, 21],
    [7, 0],
    [3, 21],
    [17, 21],
    [8, 21],
    [5, 20],
    [4, 18],
    [4, 16],
    [5, 14],
    [7, 13],
    [11, 12],
    [14, 11],
    [16, 9],
    [17, 7],
    [17, 4],
    [16, 2],
    [15, 1],
    [12, 0],
    [8, 0],
    [5, 1],
    [4, 2],
    [3, 4],
    [3, 7],
    [4, 9],
    [6, 11],
    [9, 12],
    [13, 13],
    [15, 14],
    [16, 16],
    [16, 18],
    [15, 20],
    [12, 21],
    [8, 21],
    [16, 14],
    [15, 11],
    [13, 9],
    [10, 8],
    [9, 8],
    [6, 9],
    [4, 11],
    [3, 14],
    [3, 15],
    [4, 18],
    [6, 20],
    [9, 21],
    [10, 21],
    [13, 20],
    [15, 18],
    [16, 14],
    [16, 9],
    [15, 4],
    [13, 1],
    [10, 0],
    [8, 0],
    [5, 1],
    [4, 3],
    [5, 14],
    [4, 13],
    [5, 12],
    [6, 13],
    [5, 14],
    [5, 2],
    [4, 1],
    [5, 0],
    [6, 1],
    [5, 2],
    [5, 14],
    [4, 13],
    [5, 12],
    [6, 13],
    [5, 14],
    [6, 1],
    [5, 0],
    [4, 1],
    [5, 2],
    [6, 1],
    [6, -1],
    [5, -3],
    [4, -4],
    [20, 18],
    [4, 9],
    [20, 0],
    [4, 12],
    [22, 12],
    [4, 6],
    [22, 6],
    [4, 18],
    [20, 9],
    [4, 0],
    [3, 16],
    [3, 17],
    [4, 19],
    [5, 20],
    [7, 21],
    [11, 21],
    [13, 20],
    [14, 19],
    [15, 17],
    [15, 15],
    [14, 13],
    [13, 12],
    [9, 10],
    [9, 7],
    [9, 2],
    [8, 1],
    [9, 0],
    [10, 1],
    [9, 2],
    [18, 13],
    [17, 15],
    [15, 16],
    [12, 16],
    [10, 15],
    [9, 14],
    [8, 11],
    [8, 8],
    [9, 6],
    [11, 5],
    [14, 5],
    [16, 6],
    [17, 8],
    [12, 16],
    [10, 14],
    [9, 11],
    [9, 8],
    [10, 6],
    [11, 5],
    [18, 16],
    [17, 8],
    [17, 6],
    [19, 5],
    [21, 5],
    [23, 7],
    [24, 10],
    [24, 12],
    [23, 15],
    [22, 17],
    [20, 19],
    [18, 20],
    [15, 21],
    [12, 21],
    [9, 20],
    [7, 19],
    [5, 17],
    [4, 15],
    [3, 12],
    [3, 9],
    [4, 6],
    [5, 4],
    [7, 2],
    [9, 1],
    [12, 0],
    [15, 0],
    [18, 1],
    [20, 2],
    [21, 3],
    [19, 16],
    [18, 8],
    [18, 6],
    [19, 5],
    [9, 21],
    [1, 0],
    [9, 21],
    [17, 0],
    [4, 7],
    [14, 7],
    [4, 21],
    [4, 0],
    [4, 21],
    [13, 21],
    [16, 20],
    [17, 19],
    [18, 17],
    [18, 15],
    [17, 13],
    [16, 12],
    [13, 11],
    [4, 11],
    [13, 11],
    [16, 10],
    [17, 9],
    [18, 7],
    [18, 4],
    [17, 2],
    [16, 1],
    [13, 0],
    [4, 0],
    [18, 16],
    [17, 18],
    [15, 20],
    [13, 21],
    [9, 21],
    [7, 20],
    [5, 18],
    [4, 16],
    [3, 13],
    [3, 8],
    [4, 5],
    [5, 3],
    [7, 1],
    [9, 0],
    [13, 0],
    [15, 1],
    [17, 3],
    [18, 5],
    [4, 21],
    [4, 0],
    [4, 21],
    [11, 21],
    [14, 20],
    [16, 18],
    [17, 16],
    [18, 13],
    [18, 8],
    [17, 5],
    [16, 3],
    [14, 1],
    [11, 0],
    [4, 0],
    [4, 21],
    [4, 0],
    [4, 21],
    [17, 21],
    [4, 11],
    [12, 11],
    [4, 0],
    [17, 0],
    [4, 21],
    [4, 0],
    [4, 21],
    [17, 21],
    [4, 11],
    [12, 11],
    [18, 16],
    [17, 18],
    [15, 20],
    [13, 21],
    [9, 21],
    [7, 20],
    [5, 18],
    [4, 16],
    [3, 13],
    [3, 8],
    [4, 5],
    [5, 3],
    [7, 1],
    [9, 0],
    [13, 0],
    [15, 1],
    [17, 3],
    [18, 5],
    [18, 8],
    [13, 8],
    [18, 8],
    [4, 21],
    [4, 0],
    [18, 21],
    [18, 0],
    [4, 11],
    [18, 11],
    [4, 21],
    [4, 0],
    [12, 21],
    [12, 5],
    [11, 2],
    [10, 1],
    [8, 0],
    [6, 0],
    [4, 1],
    [3, 2],
    [2, 5],
    [2, 7],
    [4, 21],
    [4, 0],
    [18, 21],
    [4, 7],
    [9, 12],
    [18, 0],
    [4, 21],
    [4, 0],
    [4, 0],
    [16, 0],
    [4, 21],
    [4, 0],
    [4, 21],
    [12, 0],
    [20, 21],
    [12, 0],
    [20, 21],
    [20, 0],
    [4, 21],
    [4, 0],
    [4, 21],
    [18, 0],
    [18, 21],
    [18, 0],
    [9, 21],
    [7, 20],
    [5, 18],
    [4, 16],
    [3, 13],
    [3, 8],
    [4, 5],
    [5, 3],
    [7, 1],
    [9, 0],
    [13, 0],
    [15, 1],
    [17, 3],
    [18, 5],
    [19, 8],
    [19, 13],
    [18, 16],
    [17, 18],
    [15, 20],
    [13, 21],
    [9, 21],
    [4, 21],
    [4, 0],
    [4, 21],
    [13, 21],
    [16, 20],
    [17, 19],
    [18, 17],
    [18, 14],
    [17, 12],
    [16, 11],
    [13, 10],
    [4, 10],
    [9, 21],
    [7, 20],
    [5, 18],
    [4, 16],
    [3, 13],
    [3, 8],
    [4, 5],
    [5, 3],
    [7, 1],
    [9, 0],
    [13, 0],
    [15, 1],
    [17, 3],
    [18, 5],
    [19, 8],
    [19, 13],
    [18, 16],
    [17, 18],
    [15, 20],
    [13, 21],
    [9, 21],
    [12, 4],
    [18, -2],
    [4, 21],
    [4, 0],
    [4, 21],
    [13, 21],
    [16, 20],
    [17, 19],
    [18, 17],
    [18, 15],
    [17, 13],
    [16, 12],
    [13, 11],
    [4, 11],
    [11, 11],
    [18, 0],
    [17, 18],
    [15, 20],
    [12, 21],
    [8, 21],
    [5, 20],
    [3, 18],
    [3, 16],
    [4, 14],
    [5, 13],
    [7, 12],
    [13, 10],
    [15, 9],
    [16, 8],
    [17, 6],
    [17, 3],
    [15, 1],
    [12, 0],
    [8, 0],
    [5, 1],
    [3, 3],
    [8, 21],
    [8, 0],
    [1, 21],
    [15, 21],
    [4, 21],
    [4, 6],
    [5, 3],
    [7, 1],
    [10, 0],
    [12, 0],
    [15, 1],
    [17, 3],
    [18, 6],
    [18, 21],
    [1, 21],
    [9, 0],
    [17, 21],
    [9, 0],
    [2, 21],
    [7, 0],
    [12, 21],
    [7, 0],
    [12, 21],
    [17, 0],
    [22, 21],
    [17, 0],
    [3, 21],
    [17, 0],
    [17, 21],
    [3, 0],
    [1, 21],
    [9, 11],
    [9, 0],
    [17, 21],
    [9, 11],
    [17, 21],
    [3, 0],
    [3, 21],
    [17, 21],
    [3, 0],
    [17, 0],
    [4, 25],
    [4, -7],
    [5, 25],
    [5, -7],
    [4, 25],
    [11, 25],
    [4, -7],
    [11, -7],
    [0, 21],
    [14, -3],
    [9, 25],
    [9, -7],
    [10, 25],
    [10, -7],
    [3, 25],
    [10, 25],
    [3, -7],
    [10, -7],
    [6, 15],
    [8, 18],
    [10, 15],
    [3, 12],
    [8, 17],
    [13, 12],
    [8, 17],
    [8, 0],
    [0, -2],
    [16, -2],
    [6, 21],
    [5, 20],
    [4, 18],
    [4, 16],
    [5, 15],
    [6, 16],
    [5, 17],
    [15, 14],
    [15, 0],
    [15, 11],
    [13, 13],
    [11, 14],
    [8, 14],
    [6, 13],
    [4, 11],
    [3, 8],
    [3, 6],
    [4, 3],
    [6, 1],
    [8, 0],
    [11, 0],
    [13, 1],
    [15, 3],
    [4, 21],
    [4, 0],
    [4, 11],
    [6, 13],
    [8, 14],
    [11, 14],
    [13, 13],
    [15, 11],
    [16, 8],
    [16, 6],
    [15, 3],
    [13, 1],
    [11, 0],
    [8, 0],
    [6, 1],
    [4, 3],
    [15, 11],
    [13, 13],
    [11, 14],
    [8, 14],
    [6, 13],
    [4, 11],
    [3, 8],
    [3, 6],
    [4, 3],
    [6, 1],
    [8, 0],
    [11, 0],
    [13, 1],
    [15, 3],
    [15, 21],
    [15, 0],
    [15, 11],
    [13, 13],
    [11, 14],
    [8, 14],
    [6, 13],
    [4, 11],
    [3, 8],
    [3, 6],
    [4, 3],
    [6, 1],
    [8, 0],
    [11, 0],
    [13, 1],
    [15, 3],
    [3, 8],
    [15, 8],
    [15, 10],
    [14, 12],
    [13, 13],
    [11, 14],
    [8, 14],
    [6, 13],
    [4, 11],
    [3, 8],
    [3, 6],
    [4, 3],
    [6, 1],
    [8, 0],
    [11, 0],
    [13, 1],
    [15, 3],
    [10, 21],
    [8, 21],
    [6, 20],
    [5, 17],
    [5, 0],
    [2, 14],
    [9, 14],
    [15, 14],
    [15, -2],
    [14, -5],
    [13, -6],
    [11, -7],
    [8, -7],
    [6, -6],
    [15, 11],
    [13, 13],
    [11, 14],
    [8, 14],
    [6, 13],
    [4, 11],
    [3, 8],
    [3, 6],
    [4, 3],
    [6, 1],
    [8, 0],
    [11, 0],
    [13, 1],
    [15, 3],
    [4, 21],
    [4, 0],
    [4, 10],
    [7, 13],
    [9, 14],
    [12, 14],
    [14, 13],
    [15, 10],
    [15, 0],
    [3, 21],
    [4, 20],
    [5, 21],
    [4, 22],
    [3, 21],
    [4, 14],
    [4, 0],
    [5, 21],
    [6, 20],
    [7, 21],
    [6, 22],
    [5, 21],
    [6, 14],
    [6, -3],
    [5, -6],
    [3, -7],
    [1, -7],
    [4, 21],
    [4, 0],
    [14, 14],
    [4, 4],
    [8, 8],
    [15, 0],
    [4, 21],
    [4, 0],
    [4, 14],
    [4, 0],
    [4, 10],
    [7, 13],
    [9, 14],
    [12, 14],
    [14, 13],
    [15, 10],
    [15, 0],
    [15, 10],
    [18, 13],
    [20, 14],
    [23, 14],
    [25, 13],
    [26, 10],
    [26, 0],
    [4, 14],
    [4, 0],
    [4, 10],
    [7, 13],
    [9, 14],
    [12, 14],
    [14, 13],
    [15, 10],
    [15, 0],
    [8, 14],
    [6, 13],
    [4, 11],
    [3, 8],
    [3, 6],
    [4, 3],
    [6, 1],
    [8, 0],
    [11, 0],
    [13, 1],
    [15, 3],
    [16, 6],
    [16, 8],
    [15, 11],
    [13, 13],
    [11, 14],
    [8, 14],
    [4, 14],
    [4, -7],
    [4, 11],
    [6, 13],
    [8, 14],
    [11, 14],
    [13, 13],
    [15, 11],
    [16, 8],
    [16, 6],
    [15, 3],
    [13, 1],
    [11, 0],
    [8, 0],
    [6, 1],
    [4, 3],
    [15, 14],
    [15, -7],
    [15, 11],
    [13, 13],
    [11, 14],
    [8, 14],
    [6, 13],
    [4, 11],
    [3, 8],
    [3, 6],
    [4, 3],
    [6, 1],
    [8, 0],
    [11, 0],
    [13, 1],
    [15, 3],
    [4, 14],
    [4, 0],
    [4, 8],
    [5, 11],
    [7, 13],
    [9, 14],
    [12, 14],
    [14, 11],
    [13, 13],
    [10, 14],
    [7, 14],
    [4, 13],
    [3, 11],
    [4, 9],
    [6, 8],
    [11, 7],
    [13, 6],
    [14, 4],
    [14, 3],
    [13, 1],
    [10, 0],
    [7, 0],
    [4, 1],
    [3, 3],
    [5, 21],
    [5, 4],
    [6, 1],
    [8, 0],
    [10, 0],
    [2, 14],
    [9, 14],
    [4, 14],
    [4, 4],
    [5, 1],
    [7, 0],
    [10, 0],
    [12, 1],
    [15, 4],
    [15, 14],
    [15, 0],
    [2, 14],
    [8, 0],
    [14, 14],
    [8, 0],
    [3, 14],
    [7, 0],
    [11, 14],
    [7, 0],
    [11, 14],
    [15, 0],
    [19, 14],
    [15, 0],
    [3, 14],
    [14, 0],
    [14, 14],
    [3, 0],
    [2, 14],
    [8, 0],
    [14, 14],
    [8, 0],
    [6, -4],
    [4, -6],
    [2, -7],
    [1, -7],
    [14, 14],
    [3, 0],
    [3, 14],
    [14, 14],
    [3, 0],
    [14, 0],
    [9, 25],
    [7, 24],
    [6, 23],
    [5, 21],
    [5, 19],
    [6, 17],
    [7, 16],
    [8, 14],
    [8, 12],
    [6, 10],
    [7, 24],
    [6, 22],
    [6, 20],
    [7, 18],
    [8, 17],
    [9, 15],
    [9, 13],
    [8, 11],
    [4, 9],
    [8, 7],
    [9, 5],
    [9, 3],
    [8, 1],
    [7, 0],
    [6, -2],
    [6, -4],
    [7, -6],
    [6, 8],
    [8, 6],
    [8, 4],
    [7, 2],
    [6, 1],
    [5, -1],
    [5, -3],
    [6, -5],
    [7, -6],
    [9, -7],
    [4, 25],
    [4, -7],
    [5, 25],
    [7, 24],
    [8, 23],
    [9, 21],
    [9, 19],
    [8, 17],
    [7, 16],
    [6, 14],
    [6, 12],
    [8, 10],
    [7, 24],
    [8, 22],
    [8, 20],
    [7, 18],
    [6, 17],
    [5, 15],
    [5, 13],
    [6, 11],
    [10, 9],
    [6, 7],
    [5, 5],
    [5, 3],
    [6, 1],
    [7, 0],
    [8, -2],
    [8, -4],
    [7, -6],
    [8, 8],
    [6, 6],
    [6, 4],
    [7, 2],
    [8, 1],
    [9, -1],
    [9, -3],
    [8, -5],
    [7, -6],
    [5, -7],
    [3, 6],
    [3, 8],
    [4, 11],
    [6, 12],
    [8, 12],
    [10, 11],
    [14, 8],
    [16, 7],
    [18, 7],
    [20, 8],
    [21, 10],
    [3, 8],
    [4, 10],
    [6, 11],
    [8, 11],
    [10, 10],
    [14, 7],
    [16, 6],
    [18, 6],
    [20, 7],
    [21, 10],
    [21, 12],
];

const SIMPLEX_STROKES: [Range<usize>; 188] = [
    0..2,
    2..7,
    7..9,
    9..11,
    11..13,
    13..15,
    15..17,
    17..19,
    19..21,
    21..23,
    23..43,
    43..45,
    45..61,
    61..72,
    72..106,
    106..113,
    113..123,
    123..133,
    133..135,
    135..137,
    137..139,
    139..141,
    141..143,
    143..151,
    151..153,
    153..158,
    158..160,
    160..177,
    177..181,
    181..195,
    195..210,
    210..213,
    213..215,
    215..232,
    232..255,
    255..257,
    257..259,
    259..288,
    288..311,
    311..316,
    316..321,
    321..326,
    326..334,
    334..337,
    337..339,
    339..341,
    341..344,
    344..358,
    358..363,
    363..376,
    376..382,
    382..411,
    411..415,
    415..417,
    417..419,
    419..421,
    421..423,
    423..432,
    432..442,
    442..460,
    460..462,
    462..474,
    474..476,
    476..478,
    478..480,
    480..482,
    482..484,
    484..486,
    486..488,
    488..507,
    507..509,
    509..511,
    511..513,
    513..515,
    515..517,
    517..527,
    527..529,
    529..531,
    531..533,
    533..535,
    535..537,
    537..539,
    539..541,
    541..543,
    543..545,
    545..547,
    547..549,
    549..551,
    551..572,
    572..574,
    574..584,
    584..605,
    605..607,
    607..609,
    609..619,
    619..621,
    621..641,
    641..643,
    643..645,
    645..655,
    655..657,
    657..659,
    659..661,
    661..663,
    663..665,
    665..667,
    667..669,
    669..671,
    671..674,
    674..676,
    676..678,
    678..680,
    680..682,
    682..684,
    684..686,
    686..688,
    688..690,
    690..692,
    692..694,
    694..696,
    696..698,
    698..700,
    700..703,
    703..706,
    706..708,
    708..710,
    710..717,
    717..719,
    719..733,
    733..735,
    735..749,
    749..763,
    763..765,
    765..779,
    779..796,
    796..801,
    801..803,
    803..810,
    810..824,
    824..826,
    826..833,
    833..838,
    838..840,
    840..845,
    845..850,
    850..852,
    852..854,
    854..856,
    856..858,
    858..860,
    860..867,
    867..874,
    874..876,
    876..883,
    883..900,
    900..902,
    902..916,
    916..918,
    918..932,
    932..934,
    934..939,
    939..956,
    956..961,
    961..963,
    963..970,
    970..972,
    972..974,
    974..976,
    976..978,
    978..980,
    980..982,
    982..984,
    984..986,
    986..988,
    988..990,
    990..996,
    996..998,
    998..1000,
    1000..1002,
    1002..1012,
    1012..1029,
    1029..1039,
    1039..1041,
    1041..1051,
    1051..1068,
    1068..1078,
    1078..1089,
    1089..1100,
];

const SIMPLEX_GLYPHS: [(i8, Range<usize>); 95] = [
    (16, 0..0),
    (10, 0..2),
    (16, 2..4),
    (21, 4..8),
    (20, 8..11),
    (24, 11..14),
    (26, 14..15),
    (10, 15..16),
    (14, 16..17),
    (14, 17..18),
    (16, 18..21),
    (26, 21..23),
    (10, 23..24),
    (26, 24..25),
    (10, 25..26),
    (22, 26..27),
    (20, 27..28),
    (20, 28..29),
    (20, 29..30),
    (20, 30..31),
    (20, 31..33),
    (20, 33..34),
    (20, 34..35),
    (20, 35..37),
    (20, 37..38),
    (20, 38..39),
    (10, 39..41),
    (10, 41..43),
    (24, 43..44),
    (26, 44..46),
    (24, 46..47),
    (18, 47..49),
    (27, 49..53),
    (18, 53..56),
    (21, 56..59),
    (21, 59..60),
    (21, 60..62),
    (19, 62..66),
    (18, 66..69),
    (21, 69..71),
    (22, 71..74),
    (8, 74..75),
    (16, 75..76),
    (21, 76..79),
    (17, 79..81),
    (24, 81..85),
    (22, 85..88),
    (22, 88..89),
    (21, 89..91),
    (22, 91..93),
    (21, 93..96),
    (20, 96..97),
    (16, 97..99),
    (22, 99..100),
    (18, 100..102),
    (24, 102..106),
    (20, 106..108),
    (18, 108..110),
    (20, 110..113),
    (14, 113..117),
    (14, 117..118),
    (14, 118..122),
    (16, 122..125),
    (16, 125..126),
    (10, 126..127),
    (19, 127..129),
    (19, 129..131),
    (18, 131..132),
    (19, 132..134),
    (18, 134..135),
    (12, 135..137),
    (19, 137..139),
    (19, 139..141),
    (8, 141..143),
    (10, 143..145),
    (17, 145..148),
    (8, 148..149),
    (30, 149..152),
    (19, 152..154),
    (19, 154..155),
    (19, 155..157),
    (19, 157..159),
    (13, 159..161),
    (17, 161..162),
    (12, 162..164),
    (19, 164..166),
    (16, 166..168),
    (22, 168..172),
    (17, 172..174),
    (16, 174..176),
    (17, 176..179),
    (14, 179..182),
    (8, 182..183),
    (14, 183..186),
    (24, 186..188),
];

impl<Config, Clear> GizmoBuffer<Config, Clear>
where
    Config: GizmoConfigGroup,
    Clear: 'static + Send + Sync,
{
    /// Draw text using a stroke font in 2d with the given isometry applied.
    ///
    /// # Arguments
    ///
    /// - `isometry`: defines the translation and rotation of the text.
    /// - `text`: the text to be drawn.
    /// - `size`: the size of the text in pixels.
    /// - `color`: the color of the text.
    ///
    /// # Example
    /// ```
    /// # use bevy_gizmos::prelude::*;
    /// # use bevy_math::prelude::*;
    /// # use bevy_color::Color;
    /// fn system(mut gizmos: Gizmos) {
    ///     gizmos.text_2d(Isometry2d::IDENTITY, "2D text gizmo", 25., Color::WHITE);
    /// }
    /// # bevy_ecs::system::assert_is_system(system);
    /// ```
    pub fn text_2d(
        &mut self,
        isometry: impl Into<Isometry2d>,
        text: &str,
        size: f32,
        color: impl Into<Color>,
    ) {
        let isometry = isometry.into();
        let color = color.into();
        let scale = size / SIMPLEX_CAP_HEIGHT;
        let line_height = LINE_HEIGHT * size;
        let space_advance = SIMPLEX_GLYPHS[0].0 as f32 * scale;

        let mut rx = 0.0;
        let mut ry = 0.0;

        for c in text.chars() {
            if c == '\n' {
                rx = 0.0;
                ry -= line_height;
                continue;
            }

            let code_point = c as usize;
            if !(SIMPLEX_ASCII_START..=SIMPLEX_ASCII_END).contains(&code_point) {
                rx += space_advance;
                continue;
            }

            let glyph = &SIMPLEX_GLYPHS[code_point - SIMPLEX_ASCII_START];
            let advance = glyph.0 as f32 * scale;

            for stroke_index in glyph.1.clone() {
                let stroke = SIMPLEX_STROKES[stroke_index].clone();
                if stroke.len() < 2 {
                    continue;
                }

                self.linestrip_2d(
                    SIMPLEX_POSITIONS[stroke].iter().map(|&[x, y]| {
                        isometry
                            * Vec2::new(
                                rx + scale * x as f32,
                                ry - scale * (SIMPLEX_CAP_HEIGHT - y as f32),
                            )
                    }),
                    color,
                );
            }

            rx += advance;
        }
    }

    /// Draw text using a stroke font with the given isometry applied.
    ///
    /// # Arguments
    ///
    /// - `isometry`: defines the translation and rotation of the text.
    /// - `text`: the text to be drawn.
    /// - `size`: the size of the text in pixels.
    /// - `color`: the color of the text.
    ///
    /// # Example
    /// ```
    /// # use bevy_gizmos::prelude::*;
    /// # use bevy_math::prelude::*;
    /// # use bevy_color::Color;
    /// fn system(mut gizmos: Gizmos) {
    ///     gizmos.text_3d(Isometry3d::IDENTITY, "3D text gizmo", 25., Color::WHITE);
    /// }
    /// # bevy_ecs::system::assert_is_system(system);
    /// ```
    pub fn text(
        &mut self,
        isometry: impl Into<Isometry3d>,
        text: &str,
        size: f32,
        color: impl Into<Color>,
    ) {
        let isometry = isometry.into();
        let color = color.into();
        let scale = size / SIMPLEX_CAP_HEIGHT;
        let line_height = LINE_HEIGHT * size;
        let space_advance = SIMPLEX_GLYPHS[0].0 as f32 * scale;

        let mut rx = 0.0;
        let mut ry = 0.0;

        for c in text.chars() {
            if c == '\n' {
                rx = 0.0;
                ry -= line_height;
                continue;
            }

            let code_point = c as usize;
            if !(SIMPLEX_ASCII_START..=SIMPLEX_ASCII_END).contains(&code_point) {
                rx += space_advance;
                continue;
            }

            let glyph = &SIMPLEX_GLYPHS[code_point - SIMPLEX_ASCII_START];
            let advance = glyph.0 as f32 * scale;

            for stroke_index in glyph.1.clone() {
                let stroke = SIMPLEX_STROKES[stroke_index].clone();
                if stroke.len() < 2 {
                    continue;
                }

                self.linestrip(
                    SIMPLEX_POSITIONS[stroke].iter().map(|&[x, y]| {
                        isometry
                            * Vec3::new(
                                rx + scale * x as f32,
                                ry - scale * (SIMPLEX_CAP_HEIGHT - y as f32),
                                0.0,
                            )
                    }),
                    color,
                );
            }

            rx += advance;
        }
    }
}
